// Generated by CoffeeScript 1.6.2
$(function() {
  return true;
});

window.Task = (function() {
  function Task(id) {
    if (id != null) {
      this.load(id);
    } else {
      this["new"]();
    }
  }

  Task.prototype.render = function() {
    return "p";
  };

  Task.prototype.load = function(id) {
    var me;

    me = this;
    return $.get('/api/get_task', {
      id: id
    }, function(r) {
      var k, _i, _len, _ref;

      assert(r.id != null, 'Illegal or invalid Task loaded');
      _ref = ['id', 'text'];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        k = _ref[_i];
        if (r[k] != null) {
          me[k] = r[k];
        }
      }
      return me.onUpdate.call(me);
    });
  };

  Task.prototype["new"] = function() {
    return this.text = "New task";
  };

  Task.prototype.save = function() {
    var data, k, me, _i, _len, _ref;

    me = this;
    data = {};
    _ref = ['id', 'text'];
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      k = _ref[_i];
      if (this[k] != null) {
        data[k] = me[k];
      }
    }
    $.get('/api/save_task', data);
    return me;
  };

  Task.prototype.onUpdate = function() {
    return this.needsUpdate = true;
  };

  return Task;

})();
