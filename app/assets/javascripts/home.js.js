// Generated by CoffeeScript 1.6.2
$(function() {
  return true;
});

window.Task = (function() {
  function Task(id) {
    if (id != null) {
      this.load(id);
    } else {
      this["new"]();
    }
  }

  Task.prototype.load = function(id) {
    return $.get('get_task', {
      id: id
    }, function(r) {
      var k, _i, _len, _ref, _results;

      assert(r.id != null, 'Illegal or invalid Task loaded');
      _ref = ['id', 'text'];
      _results = [];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        k = _ref[_i];
        if (r[k] != null) {
          _results.push(this[k] = r[k]);
        } else {
          _results.push(void 0);
        }
      }
      return _results;
    });
  };

  Task.prototype["new"] = function() {
    return this.text = "New task";
  };

  Task.prototype.save = function() {
    var data, k, _i, _len, _ref;

    data = {};
    _ref = ['id', 'text'];
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      k = _ref[_i];
      if (this[k] != null) {
        data[k] = this[k];
      }
    }
    return $.get('save_task', data);
  };

  Task.prototype.onUpdate = function() {
    return this.needsUpdate = true;
  };

  return Task;

})();
